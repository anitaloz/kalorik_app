create table food
(
    id           bigserial
        primary key,
    name         varchar(255),
    calories     double precision,
    bel          double precision,
    fats         double precision,
    ch           double precision,
    serving_unit varchar(50),
    serving_size double precision
);

create table meal_food_items
(
    meal_id      bigint           not null
        references meals
            on delete cascade,
    food_item_id bigint           not null
        references food
            on delete cascade,
    quantity     double precision not null,
    unit         varchar(50),
    primary key (meal_id, food_item_id)
);

create table meals
(
    id         bigserial
        primary key,
    user_id    bigint
        references usr,
    meal_date  date not null,
    meal_title varchar(50)
);

create table user_info
(
    id             bigserial
        primary key,
    username       varchar(50) not null
        unique
        references usr (username),
    first_name     varchar(50),
    last_name      varchar(50),
    date_of_birth  date,
    gender         varchar(10),
    height_cm      integer,
    weight_kg      numeric(5, 2),
    activity_level varchar(50),
    caloriesnum    integer,
    purpose        varchar(30)
);

create table user_role
(
    user_id bigint      not null
        references usr,
    roles   varchar(30) not null,
    primary key (user_id, roles)
);

create table usr
(
    id       bigserial
        primary key,
    username varchar(50)  not null
        unique,
    password varchar(255) not null,
    active   varchar(30)
);